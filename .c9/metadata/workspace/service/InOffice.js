{"filter":false,"title":"InOffice.js","tooltip":"/service/InOffice.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":23,"column":33},"end":{"row":23,"column":34},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":34},"end":{"row":23,"column":35},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":35},"end":{"row":23,"column":36},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":36},"end":{"row":23,"column":37},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":42},"end":{"row":24,"column":47},"action":"remove","lines":["_data"]},{"start":{"row":24,"column":42},"end":{"row":24,"column":43},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":43},"end":{"row":24,"column":44},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":44},"end":{"row":24,"column":45},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":45},"end":{"row":24,"column":46},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":0},"end":{"row":24,"column":0},"action":"remove","lines":["    var _addInOffice = function (data) {",""]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":0},"end":{"row":24,"column":0},"action":"remove","lines":["        return InOfficeDao.insertInOffice(data);",""]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":0},"end":{"row":24,"column":0},"action":"remove","lines":["    }",""]}]}],[{"group":"doc","deltas":[{"start":{"row":29,"column":0},"end":{"row":30,"column":0},"action":"remove","lines":["        addInOffice:_addInOffice,",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":4},"end":{"row":9,"column":7},"action":"insert","lines":["// "]},{"start":{"row":10,"column":4},"end":{"row":10,"column":7},"action":"insert","lines":["// "]},{"start":{"row":11,"column":4},"end":{"row":11,"column":7},"action":"insert","lines":["// "]},{"start":{"row":12,"column":4},"end":{"row":12,"column":7},"action":"insert","lines":["// "]},{"start":{"row":13,"column":4},"end":{"row":13,"column":7},"action":"insert","lines":["// "]},{"start":{"row":14,"column":4},"end":{"row":14,"column":7},"action":"insert","lines":["// "]},{"start":{"row":15,"column":4},"end":{"row":15,"column":7},"action":"insert","lines":["// "]},{"start":{"row":16,"column":4},"end":{"row":16,"column":7},"action":"insert","lines":["// "]},{"start":{"row":17,"column":4},"end":{"row":17,"column":7},"action":"insert","lines":["// "]},{"start":{"row":18,"column":4},"end":{"row":18,"column":7},"action":"insert","lines":["// "]},{"start":{"row":19,"column":4},"end":{"row":19,"column":7},"action":"insert","lines":["// "]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":8},"end":{"row":27,"column":11},"action":"insert","lines":["// "]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":17},"end":{"row":33,"column":18},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":18},"end":{"row":33,"column":19},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":19},"end":{"row":33,"column":20},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":20},"end":{"row":33,"column":21},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":30},"end":{"row":33,"column":32},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":31},"end":{"row":33,"column":32},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":30},"end":{"row":33,"column":31},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":29},"end":{"row":33,"column":30},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":29},"end":{"row":33,"column":31},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":33,"column":31},"end":{"row":33,"column":32},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":20,"column":0},"action":"remove","lines":["    // var _data=_.initial([]);","    // var schema=new Schemas('outoffice');","    // _data = schema.get(data);","    // var _get = function (fieldName) {","    //     if (_.isNull(fieldName) || _.isUndefined(fieldName)) return _.noop();","    //     if (_.has(_data, fieldName)){","    //         return _data[fieldName];","    //     } else {","    //         return _.noop;","    //     }","    // }",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":37},"end":{"row":9,"column":47},"action":"remove","lines":["start, end"]},{"start":{"row":9,"column":37},"end":{"row":9,"column":38},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":38},"end":{"row":9,"column":39},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":39},"end":{"row":9,"column":40},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":40},"end":{"row":9,"column":41},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":46},"end":{"row":10,"column":56},"action":"remove","lines":["start, end"]},{"start":{"row":10,"column":46},"end":{"row":10,"column":47},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":47},"end":{"row":10,"column":48},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":48},"end":{"row":10,"column":49},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":49},"end":{"row":10,"column":50},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":36},"end":{"row":12,"column":43},"action":"remove","lines":["doc_num"]},{"start":{"row":12,"column":36},"end":{"row":12,"column":40},"action":"insert","lines":["data"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":43},"end":{"row":13,"column":0},"action":"insert","lines":["",""]},{"start":{"row":13,"column":0},"end":{"row":13,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":8},"end":{"row":40,"column":5},"action":"insert","lines":[" return new Promise(function(resolve, reject){","\t\t\tdb.getConnection().then(function(connection){","\t\t\t    var promiseArr = [];","\t\t\t    promiseArr.push(OutOfficeDao.removeOutOffice(connection, data));","                promiseArr.push(ApprovalDao.updateApprovalConfirm(connection, data.approval));","                ","                if(!(_.isUndefined(data.commute) || _.isNull(data.commute))){","\t\t            promiseArr.push(CommuteDao.updateCommute_t(connection, data.commute));    ","\t\t\t    }","\t\t\t    ","\t\t\t\tPromise.all(promiseArr).then(function(resultArr){","\t\t\t\t\tconnection.commit(function(){","\t\t\t\t\t\tconnection.release();","\t\t\t\t\t\tresolve();","\t\t\t\t\t});","\t\t\t\t},function(){","\t\t\t\t\tconnection.rollback(function(){","\t\t\t\t\t\tconnection.release();","\t\t\t\t\t\treject();","\t\t\t\t\t});","\t\t\t\t}).catch(function(){","\t\t\t\t    connection.rollback(function(){","\t\t\t\t        connection.release();","\t\t\t\t        reject();","\t\t\t\t    });","\t\t\t\t});\t","\t\t\t});","\t\t});"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":23},"end":{"row":16,"column":69},"action":"remove","lines":["OutOfficeDao.removeOutOffice(connection, data)"]},{"start":{"row":16,"column":23},"end":{"row":16,"column":58},"action":"insert","lines":["InOfficeDao.removeInOffice(doc_num)"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":50},"end":{"row":16,"column":57},"action":"remove","lines":["doc_num"]},{"start":{"row":16,"column":50},"end":{"row":16,"column":51},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":51},"end":{"row":16,"column":52},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":52},"end":{"row":16,"column":53},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":53},"end":{"row":16,"column":54},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":54},"end":{"row":16,"column":55},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":55},"end":{"row":16,"column":56},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":56},"end":{"row":16,"column":57},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":57},"end":{"row":16,"column":58},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":58},"end":{"row":16,"column":59},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":59},"end":{"row":16,"column":60},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":60},"end":{"row":16,"column":61},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":61},"end":{"row":16,"column":62},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":62},"end":{"row":16,"column":63},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":63},"end":{"row":16,"column":64},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":64},"end":{"row":16,"column":65},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":39},"end":{"row":6,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":10,"column":49},"action":"insert","lines":["var Promise = require('bluebird');","var db = require('../lib/dbmanager.js');","var OutOfficeDao= require('../dao/outOfficeDao.js');","var ApprovalDao= require('../dao/approvalDao.js');","var CommuteDao = require('../dao/commuteDao.js');"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"remove","lines":["var OutOfficeDao= require('../dao/outOfficeDao.js');",""]}]}],[{"group":"doc","deltas":[{"start":{"row":45,"column":0},"end":{"row":46,"column":0},"action":"remove","lines":["        return InOfficeDao.removeInOffice(doc_num);",""]}]}],[{"group":"doc","deltas":[{"start":{"row":47,"column":0},"end":{"row":48,"column":0},"action":"remove","lines":["        // get:_get,",""]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":61},"end":{"row":20,"column":65},"action":"remove","lines":["data"]},{"start":{"row":20,"column":61},"end":{"row":20,"column":63},"action":"insert","lines":["{}"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":62},"end":{"row":20,"column":63},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":63},"end":{"row":20,"column":64},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":64},"end":{"row":20,"column":65},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":65},"end":{"row":20,"column":66},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":66},"end":{"row":20,"column":67},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":67},"end":{"row":20,"column":68},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":67},"end":{"row":20,"column":68},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":66},"end":{"row":20,"column":67},"action":"remove","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":66},"end":{"row":20,"column":67},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":67},"end":{"row":20,"column":68},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":68},"end":{"row":20,"column":69},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":69},"end":{"row":20,"column":70},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":70},"end":{"row":20,"column":71},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":71},"end":{"row":20,"column":72},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":72},"end":{"row":20,"column":73},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":72},"end":{"row":20,"column":73},"action":"remove","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":72},"end":{"row":20,"column":73},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":73},"end":{"row":20,"column":74},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":74},"end":{"row":20,"column":75},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":75},"end":{"row":20,"column":76},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":61},"end":{"row":20,"column":62},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":78},"end":{"row":20,"column":79},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":63},"end":{"row":20,"column":64},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":64},"end":{"row":20,"column":65},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":65},"end":{"row":20,"column":66},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":66},"end":{"row":20,"column":67},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":67},"end":{"row":20,"column":68},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":68},"end":{"row":20,"column":69},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":85},"end":{"row":20,"column":86},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":64},"end":{"row":20,"column":68},"action":"remove","lines":["0 : "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":64},"end":{"row":20,"column":65},"action":"insert","lines":["["]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":83},"end":{"row":20,"column":84},"action":"insert","lines":["]"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":62},"end":{"row":20,"column":63},"action":"remove","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":62},"end":{"row":20,"column":63},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":82},"end":{"row":20,"column":83},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":78},"end":{"row":20,"column":79},"action":"remove","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":63},"end":{"row":20,"column":64},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":62},"end":{"row":20,"column":63},"action":"remove","lines":["["]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":62},"end":{"row":20,"column":63},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":79},"end":{"row":20,"column":80},"action":"remove","lines":["]"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":79},"end":{"row":20,"column":80},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":79},"end":{"row":20,"column":80},"action":"insert","lines":["]"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":62},"end":{"row":20,"column":63},"action":"insert","lines":["["]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":22,"column":16},"end":{"row":22,"column":16},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":44,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1422420198283,"hash":"3e9bcf7a8c0509faefc1dfcbe580acea83c08fd1"}