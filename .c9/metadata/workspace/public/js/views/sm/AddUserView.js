{"filter":false,"title":"AddUserView.js","tooltip":"/public/js/views/sm/AddUserView.js","undoManager":{"mark":82,"position":82,"stack":[[{"group":"doc","deltas":[{"start":{"row":19,"column":9},"end":{"row":47,"column":30},"action":"remove","lines":["var dfd= new $.Deferred();","    \t    var view=this;","    \t    if (!_.isUndefined(el)){","    \t        this.el=el;","    \t    }","    \t    var codeCollection= new CodeCollection(\"dept\");","    \t    codeCollection.fetch().done(function(result){","    \t        ","    \t        var _adduserTemplate= $(adduserTemplate);","    \t        var codeList =result;","    \t        ","                _adduserTemplate.find(\"#departmentSelector\").append(\"<option></option>\");","    \t        if (!_.isUndefined(codeList)){","                    for (var index in codeList){","                        var code=codeList[index];","                        _adduserTemplate.find(\"#departmentSelector\").append(\"<option value='\"+code.code+\"'>\"+code.name+\"</option>\");","                        ","                    }    \t       ","    \t        }","    \t        $(view.el).append(_adduserTemplate);","    \t        ","    \t        view.collection=codeCollection;","    \t        dfd.resolve();","    \t    }).fail(function(e){","    \t        LOG.error(e.responseJSON.message);","    \t        Dialog.error(\"CodeCollection loading fail.\");","    \t        dfd.reject();","    \t    });","    \t    return dfd.promise();"]},{"start":{"row":19,"column":9},"end":{"row":96,"column":30},"action":"insert","lines":["var dfd= new $.Deferred();","    \t    var _view=this;","    \t    if (!_.isUndefined(el)){","    \t        this.el=el;","    \t    }","    \t    ","    \t    var codeCollection= new CodeCollection(\"dept\");","    \t    $.when(codeCollection.fetch()).done(function(){","                var _model=_view.model.attributes;","        \t    var _form = new Form({","        \t        el:_view.el,","        \t        form:undefined,","        \t        childs:[{","        \t                type:\"input\",","        \t                name:\"id\",","        \t                label:i18nCommon.USER.ID,","        \t                value:_model.id","        \t        },{","        \t                type:\"input\",","        \t                name:\"name\",","        \t                label:i18nCommon.USER.NAME,","        \t                value:_model.name","        \t        },{","        \t                type:\"combo\",","        \t                name:\"dept_code\",","        \t                label:i18nCommon.USER.DEPT,","        \t                value:_model.dept_code,","        \t                collection:codeCollection,","        \t                linkField:\"dept_name\"// text 값을 셋팅 해줌 type은 hidden","        \t        },{","        \t                type:\"hidden\",","        \t                name:\"dept_name\",","        \t                value:_model.dept_name,","        \t                collection:codeCollection,","        \t        },{","        \t                type:\"input\",","        \t                name:\"name_commute\",","        \t                label:i18nCommon.USER.NAME_COMMUTE,","        \t                value:_model.name_commute","        \t        },{","        \t                type:\"date\",","        \t                name:\"join_company\",","        \t                label:i18nCommon.USER.JOIN_COMPANY,","        \t                value:_model.join_company,","        \t                format:\"YYYY-MM-DD\"","        \t        },{","        \t                type:\"date\",","        \t                name:\"leave_company\",","        \t                label:i18nCommon.USER.LEAVE_COMPANY,","        \t                value:_model.leave_company,","        \t                format:\"YYYY-MM-DD\"","        \t        },{","        \t                type:\"combo\",","        \t                name:\"privilege\",","        \t                label:i18nCommon.USER.PRIVILEGE,","        \t                value:_model.privilege,","        \t                collection:[{key:1,value:i18nCommon.CODE.PRIVILEGE_1},{key:2,value:i18nCommon.CODE.PRIVILEGE_2},{key:3,value:i18nCommon.CODE.PRIVILEGE_3}]","        \t        },{","        \t                type:\"combo\",","        \t                name:\"admin\",","        \t                label:i18nCommon.USER.ADMIN,","        \t                value:_model.admin,","        \t                collection:[{key:0,value:i18nCommon.CODE.ADMIN_0},{key:1,value:i18nCommon.CODE.ADMIN_1}]","        \t        }]","        \t    });","        \t    ","        \t    _form.render().done(function(){","        \t        _view.form=_form;","        \t        dfd.resolve();","        \t    }).fail(function(){","        \t        dfd.reject();","        \t    });  ","    \t    }).fail(function(e){","    \t        Dialog.error(i18nCommon.ERROR.USER_EDIT_VIEW.FAIL_RENDER);","    \t        LOG.error(e.responseJSON.message);","                dfd.reject();    \t      ","    \t    });","    \t    return dfd.promise();"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":11},"end":{"row":10,"column":20},"action":"insert","lines":["","  'i18n!nls/common',"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":37},"end":{"row":10,"column":20},"action":"remove","lines":["","  'log',","  'dialog',","  'i18n!nls/common',"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":18},"end":{"row":7,"column":20},"action":"insert","lines":["","  'log',","  'dialog',","  'i18n!nls/common',"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":20},"end":{"row":8,"column":40},"action":"remove","lines":["","  'text!templates/adduserTemplate.html',"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":37},"end":{"row":10,"column":0},"action":"insert","lines":["",""]},{"start":{"row":10,"column":0},"end":{"row":10,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":2},"end":{"row":11,"column":40},"action":"insert","lines":["","  'text!templates/adduserTemplate.html',"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":37},"end":{"row":10,"column":2},"action":"remove","lines":["","  "]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":36},"end":{"row":11,"column":53},"action":"remove","lines":[", adduserTemplate"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":76},"end":{"row":11,"column":93},"action":"insert","lines":[", adduserTemplate"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":65},"end":{"row":11,"column":77},"action":"remove","lines":["log, Dialog,"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":64},"end":{"row":11,"column":65},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":38},"end":{"row":11,"column":50},"action":"insert","lines":["log, Dialog,"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":50},"end":{"row":11,"column":51},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":20},"end":{"row":8,"column":0},"action":"insert","lines":["",""]},{"start":{"row":8,"column":0},"end":{"row":8,"column":2},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":2},"end":{"row":9,"column":23},"action":"insert","lines":["","  'lib/component/form',"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":20},"end":{"row":8,"column":2},"action":"remove","lines":["","  "]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":50},"end":{"row":12,"column":51},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":51},"end":{"row":12,"column":52},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":51},"end":{"row":12,"column":52},"action":"remove","lines":["i"]},{"start":{"row":12,"column":51},"end":{"row":12,"column":61},"action":"insert","lines":["i18nCommon"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":61},"end":{"row":12,"column":62},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":62},"end":{"row":12,"column":63},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":63},"end":{"row":12,"column":64},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":64},"end":{"row":12,"column":65},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":64},"end":{"row":12,"column":65},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":63},"end":{"row":12,"column":64},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":63},"end":{"row":12,"column":64},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":64},"end":{"row":12,"column":65},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":65},"end":{"row":12,"column":66},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":66},"end":{"row":12,"column":67},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":67},"end":{"row":12,"column":68},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":63},"end":{"row":12,"column":67},"action":"remove","lines":["form"]},{"start":{"row":12,"column":63},"end":{"row":12,"column":67},"action":"insert","lines":["Form"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":28},"end":{"row":18,"column":0},"action":"insert","lines":["",""]},{"start":{"row":18,"column":0},"end":{"row":18,"column":9},"action":"insert","lines":["    \t    "]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":9},"end":{"row":19,"column":0},"action":"insert","lines":["",""]},{"start":{"row":19,"column":0},"end":{"row":19,"column":9},"action":"insert","lines":["    \t    "]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":9},"end":{"row":19,"column":40},"action":"insert","lines":["this.model=new UserModel(data);"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":34},"end":{"row":19,"column":38},"action":"remove","lines":["data"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":34},"end":{"row":19,"column":36},"action":"insert","lines":["[]"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":35},"end":{"row":19,"column":36},"action":"remove","lines":["]"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":34},"end":{"row":19,"column":35},"action":"remove","lines":["["]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":34},"end":{"row":19,"column":36},"action":"insert","lines":["{}"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":35},"end":{"row":19,"column":36},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":36},"end":{"row":19,"column":37},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":37},"end":{"row":19,"column":38},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":38},"end":{"row":19,"column":39},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":39},"end":{"row":19,"column":40},"action":"insert","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":34},"end":{"row":19,"column":41},"action":"remove","lines":["{_id:1}"]}]}],[{"group":"doc","deltas":[{"start":{"row":73,"column":44},"end":{"row":73,"column":45},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":73,"column":45},"end":{"row":74,"column":0},"action":"insert","lines":["",""]},{"start":{"row":74,"column":0},"end":{"row":74,"column":25},"action":"insert","lines":["        \t                "]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":25},"end":{"row":74,"column":26},"action":"insert","lines":["ㅍ"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":25},"end":{"row":74,"column":26},"action":"remove","lines":["ㅍ"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":25},"end":{"row":74,"column":26},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":26},"end":{"row":74,"column":27},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":27},"end":{"row":74,"column":28},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":28},"end":{"row":74,"column":29},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":25},"end":{"row":74,"column":29},"action":"remove","lines":["vali"]},{"start":{"row":74,"column":25},"end":{"row":74,"column":35},"action":"insert","lines":["validation"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":35},"end":{"row":74,"column":36},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":36},"end":{"row":74,"column":37},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":37},"end":{"row":74,"column":38},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":38},"end":{"row":74,"column":39},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":39},"end":{"row":74,"column":40},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":40},"end":{"row":74,"column":41},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":40},"end":{"row":74,"column":41},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":39},"end":{"row":74,"column":40},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":39},"end":{"row":74,"column":40},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":40},"end":{"row":74,"column":41},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":40},"end":{"row":74,"column":41},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":39},"end":{"row":74,"column":40},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":38},"end":{"row":74,"column":39},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":38},"end":{"row":74,"column":39},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":39},"end":{"row":74,"column":40},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":40},"end":{"row":74,"column":41},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":107,"column":9},"end":{"row":107,"column":63},"action":"remove","lines":["var _data= this.getFormData( $(this.el).find('form'));"]},{"start":{"row":107,"column":9},"end":{"row":107,"column":62},"action":"insert","lines":["var _view=this,_form=this.form,_data=_form.getData();"]}]}],[{"group":"doc","deltas":[{"start":{"row":107,"column":62},"end":{"row":108,"column":0},"action":"insert","lines":["",""]},{"start":{"row":108,"column":0},"end":{"row":108,"column":9},"action":"insert","lines":["    \t    "]}]}],[{"group":"doc","deltas":[{"start":{"row":107,"column":62},"end":{"row":108,"column":9},"action":"remove","lines":["","    \t    "]}]}],[{"group":"doc","deltas":[{"start":{"row":108,"column":45},"end":{"row":111,"column":18},"action":"remove","lines":["","    \t   // _userModel.on(\"invalid\", function(model, error) {","        //         Dialog.warning(error);  ","        //     });"]}]}],[{"group":"doc","deltas":[{"start":{"row":109,"column":55},"end":{"row":110,"column":0},"action":"insert","lines":["",""]},{"start":{"row":110,"column":0},"end":{"row":110,"column":12},"action":"insert","lines":["            "]}]}],[{"group":"doc","deltas":[{"start":{"row":129,"column":33},"end":{"row":129,"column":38},"action":"remove","lines":["model"]},{"start":{"row":129,"column":33},"end":{"row":129,"column":38},"action":"insert","lines":["_data"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":55},"end":{"row":128,"column":53},"action":"remove","lines":["","        \t            //view.collection","        \t            var codeList= view.collection.models;","        \t            var modelArr=_.pluck(codeList, \"attributes\");","        \t            //var keyArr=_.pluck(models, \"code\");","        \t            var findArr=_.filter(modelArr, function(obj){ ","        \t                return obj.code==model.attributes.dept_code;","        \t            });","    ","        \t            var deptName=findArr[0].name; ","        \t            model.attributes.dept_name = deptName;","        \t            model.attributes.leave_company =\"\";","        \t            model.attributes.privilege =\"0\";"]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":19},"end":{"row":69,"column":0},"action":"insert","lines":["",""]},{"start":{"row":69,"column":0},"end":{"row":69,"column":17},"action":"insert","lines":["        \t        "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":17},"end":{"row":69,"column":18},"action":"insert","lines":["?"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":17},"end":{"row":69,"column":18},"action":"remove","lines":["?"]}]}],[{"group":"doc","deltas":[{"start":{"row":76,"column":19},"end":{"row":77,"column":0},"action":"insert","lines":["",""]},{"start":{"row":77,"column":0},"end":{"row":77,"column":17},"action":"insert","lines":["        \t        "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":16},"end":{"row":69,"column":18},"action":"insert","lines":["//"]},{"start":{"row":70,"column":16},"end":{"row":70,"column":18},"action":"insert","lines":["//"]},{"start":{"row":71,"column":16},"end":{"row":71,"column":18},"action":"insert","lines":["//"]},{"start":{"row":72,"column":16},"end":{"row":72,"column":18},"action":"insert","lines":["//"]},{"start":{"row":73,"column":16},"end":{"row":73,"column":18},"action":"insert","lines":["//"]},{"start":{"row":74,"column":16},"end":{"row":74,"column":18},"action":"insert","lines":["//"]},{"start":{"row":75,"column":16},"end":{"row":75,"column":18},"action":"insert","lines":["//"]},{"start":{"row":76,"column":16},"end":{"row":76,"column":18},"action":"insert","lines":["//"]}]}]]},"ace":{"folds":[],"scrolltop":720,"scrollleft":0,"selection":{"start":{"row":88,"column":46},"end":{"row":88,"column":46},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1421808457529,"hash":"07b3a56c13409936b66a93af7b368722af98deee"}