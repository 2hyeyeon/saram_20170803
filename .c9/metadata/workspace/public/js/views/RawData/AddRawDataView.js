{"filter":false,"title":"AddRawDataView.js","tooltip":"/public/js/views/RawData/AddRawDataView.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":201,"column":51},"end":{"row":201,"column":57},"action":"remove","lines":["COMMIT"]},{"start":{"row":201,"column":51},"end":{"row":201,"column":64},"action":"insert","lines":["COMMIT_DIALOG"]}]}],[{"group":"doc","deltas":[{"start":{"row":201,"column":64},"end":{"row":201,"column":65},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":201,"column":65},"end":{"row":201,"column":66},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":201,"column":66},"end":{"row":201,"column":67},"action":"insert","lines":["E"]}]}],[{"group":"doc","deltas":[{"start":{"row":201,"column":67},"end":{"row":201,"column":68},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":201,"column":68},"end":{"row":201,"column":69},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":201,"column":69},"end":{"row":201,"column":70},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":201,"column":70},"end":{"row":201,"column":71},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":201,"column":71},"end":{"row":201,"column":72},"action":"insert","lines":["E"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":0},"end":{"row":216,"column":0},"action":"remove","lines":["                            console.log(res.result);",""]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":40},"end":{"row":215,"column":58},"action":"remove","lines":["\"데이터 전송이 완료되었습니다.\""]}]}],[{"group":"doc","deltas":[{"start":{"row":218,"column":41},"end":{"row":218,"column":53},"action":"remove","lines":["\"데이터 전송 실패!\""]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":40},"end":{"row":215,"column":85},"action":"insert","lines":["i18nCommon.ADD_RAW_DATA.COMMIT_DIALOG.MESSAGE"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":84},"end":{"row":215,"column":85},"action":"remove","lines":["E"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":83},"end":{"row":215,"column":84},"action":"remove","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":82},"end":{"row":215,"column":83},"action":"remove","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":81},"end":{"row":215,"column":82},"action":"remove","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":80},"end":{"row":215,"column":81},"action":"remove","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":79},"end":{"row":215,"column":80},"action":"remove","lines":["E"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":78},"end":{"row":215,"column":79},"action":"remove","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":78},"end":{"row":215,"column":79},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":79},"end":{"row":215,"column":80},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":80},"end":{"row":215,"column":81},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":81},"end":{"row":215,"column":82},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":82},"end":{"row":215,"column":83},"action":"insert","lines":["C"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":83},"end":{"row":215,"column":84},"action":"insert","lines":["O"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":84},"end":{"row":215,"column":85},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":85},"end":{"row":215,"column":86},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":86},"end":{"row":215,"column":87},"action":"insert","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":87},"end":{"row":215,"column":88},"action":"insert","lines":["T"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":88},"end":{"row":215,"column":89},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":89},"end":{"row":215,"column":90},"action":"insert","lines":["C"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":90},"end":{"row":215,"column":91},"action":"insert","lines":["O"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":91},"end":{"row":215,"column":92},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":215,"column":82},"end":{"row":215,"column":92},"action":"remove","lines":["COMMIT_COM"]},{"start":{"row":215,"column":82},"end":{"row":215,"column":96},"action":"insert","lines":["COMMIT_COMPLET"]}]}],[{"group":"doc","deltas":[{"start":{"row":218,"column":41},"end":{"row":218,"column":97},"action":"insert","lines":["i18nCommon.ADD_RAW_DATA.COMMIT_DIALOG.MSG.COMMIT_COMPLET"]}]}],[{"group":"doc","deltas":[{"start":{"row":218,"column":90},"end":{"row":218,"column":97},"action":"remove","lines":["COMPLET"]},{"start":{"row":218,"column":90},"end":{"row":218,"column":91},"action":"insert","lines":["F"]}]}],[{"group":"doc","deltas":[{"start":{"row":218,"column":91},"end":{"row":218,"column":92},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":218,"column":92},"end":{"row":218,"column":93},"action":"insert","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":218,"column":93},"end":{"row":218,"column":94},"action":"insert","lines":["L"]}]}],[{"group":"doc","deltas":[{"start":{"row":120,"column":61},"end":{"row":121,"column":0},"action":"insert","lines":["",""]},{"start":{"row":121,"column":0},"end":{"row":121,"column":44},"action":"insert","lines":["                                            "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":44},"end":{"row":121,"column":45},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":45},"end":{"row":121,"column":46},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":46},"end":{"row":121,"column":47},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":47},"end":{"row":121,"column":48},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":48},"end":{"row":121,"column":49},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":49},"end":{"row":121,"column":50},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":50},"end":{"row":121,"column":51},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":51},"end":{"row":121,"column":52},"action":"insert","lines":["L"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":52},"end":{"row":121,"column":53},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":53},"end":{"row":121,"column":54},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":54},"end":{"row":121,"column":55},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":55},"end":{"row":121,"column":56},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":56},"end":{"row":121,"column":57},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":57},"end":{"row":121,"column":58},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":58},"end":{"row":121,"column":60},"action":"insert","lines":["[]"]}]}],[{"group":"doc","deltas":[{"start":{"row":121,"column":60},"end":{"row":121,"column":61},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":70},"end":{"row":157,"column":71},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":69},"end":{"row":157,"column":70},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":68},"end":{"row":157,"column":69},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":67},"end":{"row":157,"column":68},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":67},"end":{"row":158,"column":0},"action":"insert","lines":["",""]},{"start":{"row":158,"column":0},"end":{"row":158,"column":56},"action":"insert","lines":["                                                        "]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":56},"end":{"row":158,"column":57},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":57},"end":{"row":158,"column":58},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":58},"end":{"row":158,"column":59},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":59},"end":{"row":158,"column":60},"action":"insert","lines":["L"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":60},"end":{"row":158,"column":61},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":61},"end":{"row":158,"column":62},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":62},"end":{"row":158,"column":63},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":63},"end":{"row":158,"column":64},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":64},"end":{"row":158,"column":65},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":65},"end":{"row":158,"column":66},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":66},"end":{"row":158,"column":67},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":67},"end":{"row":158,"column":68},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":68},"end":{"row":158,"column":70},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":69},"end":{"row":158,"column":70},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":70},"end":{"row":158,"column":71},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":71},"end":{"row":158,"column":72},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":72},"end":{"row":158,"column":73},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":158,"column":74},"end":{"row":158,"column":75},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":112},"end":{"row":167,"column":113},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":113},"end":{"row":167,"column":114},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":114},"end":{"row":167,"column":115},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":115},"end":{"row":167,"column":116},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":116},"end":{"row":167,"column":117},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":117},"end":{"row":167,"column":118},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":118},"end":{"row":167,"column":119},"action":"insert","lines":["L"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":119},"end":{"row":167,"column":120},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":120},"end":{"row":167,"column":121},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":121},"end":{"row":167,"column":122},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":122},"end":{"row":167,"column":123},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":122},"end":{"row":167,"column":123},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":115},"end":{"row":167,"column":116},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":114},"end":{"row":167,"column":116},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":115},"end":{"row":167,"column":116},"action":"insert","lines":["\\"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":116},"end":{"row":167,"column":117},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":117},"end":{"row":167,"column":119},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":118},"end":{"row":167,"column":120},"action":"remove","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":115},"end":{"row":167,"column":116},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":115},"end":{"row":167,"column":116},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":114},"end":{"row":167,"column":115},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":235,"column":3},"action":"remove","lines":["define([","  'jquery',","  'underscore',","  'backbone',","  'core/BaseView',","  'grid',","  'schemas',","  'dialog',","  'csvParser',","  'cmoment',","  'i18n!nls/common',","  'text!templates/default/head.html',","  'text!templates/default/content.html',","  'text!templates/layout/default.html',","  'models/common/RawDataModel',","  'collection/common/RawDataCollection',","  'models/sm/UserModel',","  'collection/sm/UserCollection',","  'views/RawData/popup/AddRawDataAddPopupView',","  'views/component/ProgressbarView'","  ","], function($, _, Backbone, BaseView, Grid, Schemas, Dialog, csvParser, Moment, i18nCommon,","    HeadHTML, ContentHTML, LayoutHTML, ","    RawDataModel, RawDataCollection, UserModel, UserCollection,","    AddRawDataAddPopupView, ProgressbarView","){","    var AddRawDataView = BaseView.extend({","        el:$(\".main-container\"),","        ","    \tinitialize:function(){","    \t\t$(this.el).html('');","    \t    $(this.el).empty();","    \t    ","    \t    this.userCollection = new UserCollection();","    \t    this.userCollection.fetch();","    \t    ","    \t    this.rawDataCollection = new RawDataCollection();","    \t    ","            this.gridOption = {","    \t\t    el:\"addRawDataContent\",","    \t\t    id:\"addRawDataTable\",","    \t\t    column:[","    \t\t        i18nCommon.ADD_RAW_DATA.GRID_COL_NAME.DEPARTMENT,","    \t\t        i18nCommon.ADD_RAW_DATA.GRID_COL_NAME.NAME,","    \t\t        i18nCommon.ADD_RAW_DATA.GRID_COL_NAME.DATE,","    \t\t        i18nCommon.ADD_RAW_DATA.GRID_COL_NAME.TIME,","    \t\t        i18nCommon.ADD_RAW_DATA.GRID_COL_NAME.TYPE","    \t\t    ],","    \t\t    dataschema:[ \"department\", \"name\", \"date\", \"time\", \"type\"],","    \t\t    collection:this.rawDataCollection,","    \t\t    detail: true,","    \t\t    fetch: false,","    \t\t    buttons:[\"search\"],","    \t\t    order:[[3,\"desc\"], [4,\"desc\"]]","    \t\t};","    \t\t","    \t\tthis._buttonInit();","    \t},","    \trender:function(){","    \t    var _headSchema=Schemas.getSchema('headTemp');","    \t    var _headTemp=_.template(HeadHTML);","    \t    var _layout=$(LayoutHTML);","    \t    var _head=$(_headTemp(_headSchema.getDefault({title:i18nCommon.ADD_RAW_DATA.TITLE, subTitle:i18nCommon.ADD_RAW_DATA.SUB_TITLE})));","    \t    ","    \t    _head.addClass(\"no-margin\");","    \t    _head.addClass(\"relative-layout\");","    \t    ","    \t    var _content=$(ContentHTML).attr(\"id\", this.gridOption.el);","    \t    this.progressbar = new ProgressbarView();","    \t    _layout.append(_head);","            _layout.append(_content);","            _layout.append(this.progressbar.render());","            ","            ","    \t    $(this.el).append(_layout);","    \t    ","    \t    var _gridSchema=Schemas.getSchema('grid');","    \t    this.grid= new Grid(_gridSchema.getDefault(this.gridOption));","            ","            this._disabledOkBtn(true);","            ","            return this;","     \t},","    \t_buttonInit:function(){","    \t    this._addAddBtn();","    \t    this._addCommitBtn();","    \t},","    \t_addAddBtn : function(){","    \t      var that = this;","    \t    ","    \t    // ADD 버튼","    \t    this.gridOption.buttons.push({","    \t        type:\"custom\",","    \t        name:\"add\",","    \t        tooltip:i18nCommon.ADD_RAW_DATA.ADD_DIALOG.TOOLTIP,","    \t        click:function(){","    \t            var addRawDataAddPopupView = new AddRawDataAddPopupView();","    \t            Dialog.show({","    \t                title:i18nCommon.ADD_RAW_DATA.ADD_DIALOG.TITLE, ","                        content:addRawDataAddPopupView, ","                        buttons: [{","                            id: 'rawDataCommitBtn',","                            cssClass: Dialog.CssClass.SUCCESS,","                            label: i18nCommon.ADD_RAW_DATA.ADD_DIALOG.BUTTON.ADD,","                            action: function(dialog) {","                                var fileForm = dialog.getModalBody().find(\"input\");","","                                var selectedFiles = fileForm[0].files;","                                if(selectedFiles.length > 0){","                                    if(window.File && window.FileList && window.FileReader){","                                        ","                                        addRawDataAddPopupView.setProgressDisabled(false);","                                        $(this).prop(\"disabled\", true); // 버튼 disabled","                                        ","                                        var file = selectedFiles[0];","                                        var csvReader = new FileReader();","                    ","                                        csvReader.addEventListener(\"load\",function(event){","                                            var result = csvParser.csvToArr(event.target.result, \",\");","                                            that.rawDataCollection.reset();","                                            var errCount = 0;","                                            var errList = [];","                                            for(var i = 1; i < result.length; i++){ // 제목줄을 빼기 위해서 1부터 시작","                                                addRawDataAddPopupView.setProgresPercent(i / result.length * 100);","                                                var item = result[i];","                                                ","                                                if(item.length != 4){    // 4개 줄로 된 데이터가 아니면 분석하지 않는다.","                                                    continue;","                                                }","                                                ","                                                var destUserInfo = that.userCollection.where({name_commute:item[1]});","                                                ","                                                var resultDate = Moment(item[2], \"YYYY-MM-DD HH:mm:ss\");","                                                ","                                                if(destUserInfo.length == 1){ // 등록된 이름인 경우","                                                    that.rawDataCollection.add(new RawDataModel({","                                                        id : destUserInfo[0].attributes.id,","                                                        name : item[1],","                                                        department : item[0],","                                                        time: resultDate.format(\"HH:mm:ss\"),","                                                        date: resultDate.format(\"YYYY-MM-DD\"),","                                                        char_date : resultDate.format(\"YYYY-MM-DD HH:mm:ss\"),","                                                        year: resultDate.year(),","                                                        type: item[3]","                                                    }));","                                                }else{ // 등록되지 않은 이름인경우 (사번이 없는경우)","                                                    if(item[1] != \"청소용 출입\"){ // 청소 아저씨 제외하고 id에 '-' 넣어서 결과 출력","                                                        that.rawDataCollection.add(new RawDataModel({","                                                            id : \"?\",","                                                            name : item[1],","                                                            department : item[0],","                                                            time: resultDate.format(\"HH:mm:ss\"),","                                                            date: resultDate.format(\"YYYY-MM-DD\"),","                                                            char_date : resultDate.format(\"YYYY-MM-DD HH:mm:ss\"),","                                                            year: resultDate.year(),","                                                            type: item[3]","                                                        })); ","                                                        errCount++;","                                                        errList.push(item);","                                                    }","                                                }","                                            }","                                            ","                                            dialog.close();","                                            that.grid.render();","                                            ","                                            if(errCount > 0){ // 사번이 없는 데이터가 있을경우","                                                Dialog.error(i18nCommon.ADD_RAW_DATA.ADD_DIALOG.MSG.ANALYZE_FAIL + \"\\n\" +errList);","                                                that._disabledOkBtn(true);","                                            }else{","                                                Dialog.info(i18nCommon.ADD_RAW_DATA.ADD_DIALOG.MSG.ANALYZE_COMPLETE);","                                                that._disabledOkBtn(false);","                                            }","","                                        });","                                        csvReader.readAsText(file, 'euc-kr');","                                        ","                                    } else{","                                        Dialog.error(i18nCommon.ADD_RAW_DATA.ADD_DIALOG.MSG.FILE_API_ERR);","                                    }","                                }else{","                                    Dialog.error(i18nCommon.ADD_RAW_DATA.ADD_DIALOG.MSG.NOT_SELECT_FILE);","                                }","                            }","                        }, {","                            label: i18nCommon.ADD_RAW_DATA.ADD_DIALOG.BUTTON.CANCEL,","                            action: function(dialog) {","                                dialog.close();","                            }","                        }]","    \t            });","    \t        }","    \t    });  ","    \t},","    \t_addCommitBtn: function(){","    \t    var that = this;","    \t    // Commit","    \t    this.gridOption.buttons.push({","    \t        type:\"custom\",","    \t        name:\"ok\",","    \t        tooltip:i18nCommon.ADD_RAW_DATA.COMMIT_DIALOG.TOOLTIP,","    \t        click:function(){","    \t            Dialog.confirm({","    \t                msg : i18nCommon.ADD_RAW_DATA.COMMIT_DIALOG.MESSAGE,","                        action:function(){","                            var dfd = new $.Deferred();","                            that.rawDataCollection.save({","                                success : function(result){","                                    dfd.resolve();","                                },","                                error : function(){","                                    dfd.reject();","                                }","                            });","            \t            return dfd;","                        },","                        actionCallBack:function(res){//response schema","                            Dialog.info(i18nCommon.ADD_RAW_DATA.COMMIT_DIALOG.MSG.COMMIT_COMPLET);","                        },","                        errorCallBack:function(){","                            Dialog.error(i18nCommon.ADD_RAW_DATA.COMMIT_DIALOG.MSG.COMMIT_FAIL);","                        },","    \t\t\t\t\t","    \t            });","    \t        }","    \t    });  ","    \t},","    \t","     \t_disabledOkBtn : function(flag){","     \t    var okbtn = this.grid.getButton(\"ok\");","            $(this.el).find(\"#\"+okbtn).prop(\"disabled\", flag);","     \t}","     \t","    });","    return AddRawDataView;","});"]},{"start":{"row":0,"column":0},"end":{"row":48,"column":3},"action":"insert","lines":["define([ ","\t'jquery',","\t'underscore',","\t'backbone',","\t'util',","\t'i18n!nls/common',","\t'text!templates/default/file.html',","\t'views/component/ProgressbarView',","], function(","\t$, _, Backbone, Util, i18nCommon,","\tFileFormHTML,","\tProgressbarView",") {","\tvar ChangeHistoryPopupView = Backbone.View.extend({","\t\tinitialize : function() {","","\t\t},","\t\tevents : {","\t\t\t","\t\t},","\t\ttest : function(event){","\t\t\tconsole.log();","\t\t},","\t\trender : function(el) {","\t\t\tvar dfd= new $.Deferred();","            ","            if (!_.isUndefined(el)){","    \t        this.el=el;","    \t    }","    \t    this.progressBar= new ProgressbarView();","    \t    var _fileForm=$(_.template(FileFormHTML)({label : i18nCommon.ADD_RAW_DATA.ADD_DIALOG.FORM.FILE, id:\"AddRawDataFileForm\", accept:\".csv\"}));","    \t    ","            $(this.el).append(_fileForm);","            $(this.el).append(this.progressBar.render());","\t\t\t$(this.el).find(\"#AddRawDataFileForm\").change(this.test);","\t\t\t","            dfd.resolve();","            return dfd.promise();","\t\t},","\t\tsetProgressDisabled : function(flag){","\t\t\tthis.progressBar.disabledProgressbar(flag);","\t\t},","\t\tsetProgresPercent : function(percent){","\t\t\tthis.progressBar.setPercent(percent);","\t\t}","\t});","\t","\treturn ChangeHistoryPopupView;","});"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":91,"column":9},"end":{"row":193,"column":7},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1429856898665,"hash":"560a1613f666165ee6c27c9831489a8f3cc148d4"}