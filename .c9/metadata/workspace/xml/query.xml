{"filter":false,"title":"query.xml","tooltip":"/xml/query.xml","undoManager":{"mark":3,"position":3,"stack":[[{"group":"doc","deltas":[{"start":{"row":26,"column":0},"end":{"row":89,"column":0},"action":"insert","lines":["<<<<<<< HEAD","=======","\t</group>","\t","    <group id=\"vacation\">","        <query id=\"selectVacationsByYear\">","\t\t\tSELECT ","\t\t\t\tm.id, ","\t\t\t    m.name,","\t\t\t    (SELECT name FROM dept_code_tbl where code = m.dept_code) dept_name,","\t\t\t    m.join_company,","\t\t\t\tt2.year,","\t\t\t\tt2.id,","\t\t\t\tt2.total_day,","\t\t\t\tt2.used_holiday,","\t\t\t    (t2.total_day - t2.used_holiday) holiday","\t\t\tFROM","\t\t\t\tmembers_tbl m","\t\t\t    INNER JOIN (","\t\t\t\t\t\t\tSELECT","\t\t\t\t\t\t\t\tv.year,","\t\t\t\t\t\t\t\tv.id,","\t\t\t\t\t\t\t\tv.total_day,","\t\t\t\t\t\t\t\tIFNULL(s.used_holiday, 0) used_holiday","\t\t\t\t\t\t\tFROM","\t\t\t\t\t\t\t\tvacation_tbl v","\t\t\t\t\t\t\t\tLEFT JOIN (","\t\t\t\t\t\t\t\t\t\t\tSELECT year, id, sum(day_count)  used_holiday","\t\t\t\t\t\t\t\t\t\t\tFROM out_office_tbl","\t\t\t\t\t\t\t\t\t\t\tGROUP BY year, id","\t\t\t\t\t\t\t\t\t\t\t) s","\t\t\t\t\t\t\t\tON v.id = s.id and v.year = s.year","\t\t\t\t\t\t\tWHERE v.year = '%s'","\t\t\t    ) t2","\t\t\t    ON m.id = t2.id","\t\t\tORDER BY m.name","        </query>","        <query id=\"selectVacatonCount\">","\t\t\tSELECT count(*) count FROM vacation_tbl WHERE year = '%s'","        </query>","        ","        <query id=\"insertVacation\">","\t\t\tINSERT INTO vacation_tbl(id, year, total_day)","\t\t\tSELECT '%s', '%s', '%s' from dual","\t\t\tWHERE NOT EXISTS (","\t\t\t\t\tSELECT id","\t\t\t\t\tFROM vacation_tbl","\t\t\t\t\tWHERE ","\t\t\t\t\t\tid = '%s'","\t\t\t        AND ","\t\t\t        \tyear = '%s' ","\t\t\t)","        </query>","","        <query id=\"updateVacation\">","        \tUPDATE ","        \t\tvacation_tbl ","        \tSET ","        \t\ttotal_day = '%s' ","        \tWHERE ","        \t\tid = '%s' AND year = '%s'","        </query>",">>>>>>> 79b1efd62ad9c1c976a027c4b7f2115464a104f0",""]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":16},"end":{"row":88,"column":48},"action":"remove","lines":["",">>>>>>> 79b1efd62ad9c1c976a027c4b7f2115464a104f0"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":0},"end":{"row":27,"column":7},"action":"remove","lines":["<<<<<<< HEAD","======="]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":95},"end":{"row":26,"column":0},"action":"remove","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":207.09085416793823,"scrollleft":0,"selection":{"start":{"row":25,"column":95},"end":{"row":25,"column":95},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":14,"state":"start","mode":"ace/mode/xml"}},"timestamp":1420781523034,"hash":"79255e11f9f589a9a8d0b3265339b98b50d2e2c0"}